# Generated by Django 3.0.4 on 2021-11-11 21:12

from django.db import migrations

def results_capture_references_fill(apps, queryset):
	Results = apps.get_model('samples', 'Results')
	NuclearCapturePlate = apps.get_model('samples', 'NuclearCapturePlate')
	
	for x in Results.objects.all():
		if x.mt_capture_plate is not None:
			x.mt_capture_plate_temp = NuclearCapturePlate.objects.get(name=x.mt_capture_plate.name, protocol_temp=x.mt_capture_plate.protocol_temp)
		if x.shotgun_pool is not None:
			x.shotgun_plate = NuclearCapturePlate.objects.get(name=x.shotgun_pool.name, protocol_temp=x.shotgun_pool.protocol_temp)
		x.save()

class Migration(migrations.Migration):

    dependencies = [
        ('samples', '0106_results_capture_references'),
    ]

    operations = [
		migrations.RunPython(results_capture_references_fill),
    ]
